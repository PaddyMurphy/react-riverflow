(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e){e.exports={data:[{text:"Brazos River : Palo Pinto",value:"08089000",class:"II-III"},{text:"Brazos River : Glen Rose",value:"08091000",class:"II-III"},{text:"Brazos River : Waco",value:"08096500",class:"II-III"},{text:"Brazos River : Bryan",value:"08108700",class:"II-III"},{text:"Lampasas River : Kempner",value:"08103800",class:"II+"},{text:"Lampasas River : Ding Dong",value:"08103940",class:"II+"},{text:"Lampasas River : Belton",value:"08104100",class:"II+"},{text:"Barton Springs",value:"08155500",class:"N/A"},{text:"Barton Creek : Above Barton Springs",value:"08155400",class:"II"},{text:"Barton Creek : Loop 360",value:"08155300",class:"II-III"},{text:"Barton Creek : Lost Ck Blvd",value:"08155240",class:"II-III"},{text:"Barton Creek : SH 71",value:"08155200",class:"II-III+"},{text:"Colorado River : Austin",value:"08158000",class:"I-II"},{text:"Colorado River : Bastrop",value:"08159200",class:"I-II"},{text:"Onion Creek : Manchaca",value:"08158827",class:"II-III"},{text:"Onion Creek : Hwy 183",value:"08159000",class:"II-III"},{text:"Onion Creek : Driftwood",value:"08158700",class:"II-III"},{text:"Llano River : Llano",value:"08151500",class:"II-III"},{text:"Llano River : Mason",value:"08150700",class:"II-III"},{text:"Llano River : Junction",value:"08150000",class:"I-II"},{text:"San Saba River : Menard",value:"08144500",class:"II"},{text:"San Saba River : San Saba",value:"08146000",class:"II"},{text:"Guadalupe River : Spring Branch",value:"08167500",class:"II"},{text:"Guadalupe River : Sattler",value:"08167800",class:"II"},{text:"Guadalupe River : Comal New Braunfels",value:"08168500",class:"II"},{text:"Guadalupe River : FM 1117 nr Seguin",value:"08169792",class:"II"},{text:"Guadalupe River : Gonzales",value:"08169845",class:"II"},{text:"San Marcos River : San Marcos",value:"08170500",class:"II"},{text:"San Marcos River : Luling",value:"08172000",class:"II"},{text:"Blanco River : Wimberley",value:"08171000",class:"II-III"},{text:"Blanco River : Kyle",value:"08171300",class:"II-III"},{text:"Nueces River : Montell",value:"08189998",class:"II"},{text:"Nueces River : Laguna",value:"08190000",class:"II"},{text:"Nueces River : Uvalde",value:"08192000",class:"II"},{text:"Nueces River : Cotulla",value:"08194000",class:"II"},{text:"Nueces River : Three Rivers",value:"08210000",class:"II"},{text:"Frio River : Concan",value:"08195000",class:"II"},{text:"Rio Grande : Castolon",value:"08374550",class:"II-III"},{text:"Rio Grande : Big Bend",value:"08375300",class:"II-III"},{text:"Pecos River : Orla",value:"08412500",class:"II-III"},{text:"Pecos River : Girvin",value:"08446500",class:"II-III"},{text:"Medina River : Patterson Road",value:"0817887350",class:"I-II"},{text:"Medina River : Bandera",value:"08178880",class:"I-II"},{text:"San Antonio River :",value:"08188500",class:"II"},{text:"Pedernales River : Fredericksburg",value:"08152900",class:"II"},{text:"Pedernales River : Johnson City",value:"08153500",class:"II"},{text:"Walnut Creek : Austin",value:"08158200",class:"III"},{text:"Dolan creek",value:"08449100",class:"I"}]}},20:function(e,t,a){e.exports=a(61)},26:function(e,t,a){},47:function(e,t,a){},49:function(e,t,a){},51:function(e,t,a){},53:function(e,t,a){},55:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),l=a(17),n=a.n(l),i=a(2),o=a(3),c=a(5),u=a(4),m=a(6),d=(a(26),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Navbar"},r.a.createElement("header",{className:"hero is-bold is-primary"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"header is-flex"},r.a.createElement("h1",{className:"title"},"Riverflow"),r.a.createElement("p",{className:"tagline"},"Texas Edition")))))}}]),t}(s.Component)),h=a(18),v=a.n(h),f=a(1),p=a.n(f),I=a(9),g=(a(47),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={error:!1,loading:!1,url:void 0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.selected&&this.displayGraph(e.selected)}},{key:"render",value:function(){var e=p()("graph-wrapper",{"has-error":!!this.state.error}),t=p()("graph-loading",{"is-hidden":!this.state.loading});return r.a.createElement("div",{className:e},r.a.createElement("div",{className:t},"Loading graph..."),r.a.createElement("div",{className:"graph-image"},this.state.url&&r.a.createElement("img",{src:this.state.url,className:"graph",alt:"USGS Water-data graph"}),this.state.error&&r.a.createElement("h2",null,"Error loading the graph.")))}},{key:"displayGraph",value:function(e){var t=this,a="//waterdata.usgs.gov/nwisweb/graph?agency_cd=USGS&period=7&parm_cd="+t.props.graphType+"&site_no="+e;t.setState({loading:!0});var s=new Image;s.src=a,s.onload=function(e){t.setState({loading:!1,url:a})},s.onerror=function(e){t.setState({error:!0,loading:!1,url:void 0})}}}]),t}(s.Component)),b=(a(49),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).selectRiver=a.selectRiver.bind(Object(I.a)(Object(I.a)(a))),a.sortBy=a.sortBy.bind(Object(I.a)(Object(I.a)(a))),a.state={selected:void 0,sortKey:"name"},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"sortBy",value:function(e){var t=this;this.setState({sortKey:e},function(){t.sortOrders[e]=-1*t.sortOrders[e]})}},{key:"selectRiver",value:function(e){var t=e.currentTarget;t.classList.contains("is-selected")?this.setState({selected:void 0}):this.setState({selected:t.dataset.selected})}},{key:"render",value:function(){var e=this.props.tableData,t=(new Date).toISOString().split("T")[0],a=p()(e.level,{"is-selected":this.state.selected===e.site}),s=p()("row-details",{"show-row":this.state.selected===e.site}),l=p()({"arrow-up":e.rising,"arrow-down":!e.rising,"is-rising-fast":e.risingFast});return r.a.createElement("tbody",null,r.a.createElement("tr",{className:a,onClick:this.selectRiver,"data-selected":e.site},r.a.createElement("th",null,e.name),r.a.createElement("td",null,r.a.createElement("span",{className:"cfs-value"},e.cfs),r.a.createElement("svg",{viewBox:"0 0 27 30",className:l},r.a.createElement("use",{xlinkHref:"#arrow-flow"}))),r.a.createElement("td",{className:"wwclass"},e.class),r.a.createElement("td",null,r.a.createElement("span",{className:"date"},e.date),r.a.createElement("span",{className:"time"},e.time))),r.a.createElement("tr",{className:s},r.a.createElement("td",{colSpan:"5"},r.a.createElement("div",{className:"row-details-wrapper columns"},r.a.createElement("div",{className:"column column-condition is-one-quarter"},r.a.createElement("div",{className:"content"},r.a.createElement("p",{className:"sitecode"},r.a.createElement("a",{className:"button site-link",href:e.location,target:"blank"},"USGS site ",e.site," location")),r.a.createElement("p",null,e.condition),r.a.createElement("p",{className:"small"},"NOTE: The rising / falling arrows compare the current value to the value 12 hours ago. The river may already be on the way down"))),r.a.createElement("div",{className:"column column-graph is-three-quarters"},r.a.createElement(g,{endDate:t,startDate:void 0,selected:this.state.selected,graphType:this.props.graphType}))))))}}]),t}(s.Component)),E=(a(51),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={sortOrder:1,sortField:"name"},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.handleSort=function(t){e.setState({sortField:t.target.dataset.sort,sortOrder:1===e.state.sortOrder?-1:1})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.sortField,s=t.sortOrder,l=[],n=this.props.tableData,i=this.props.searchQuery.toLowerCase(),o=p()("loading notification is-warning",{"is-hidden":!this.props.loading}),c=p()("table",{invisible:!!this.props.loading}),u=p()({active:"name"===a,asc:-1===s,desc:1===s}),m=p()({active:"cfs"===a,asc:-1===s,desc:1===s});return(n="cfs"===a?n.slice().sort(function(t,s){return((t=t[a])-(s=s[a]))*e.state.sortOrder}):n.slice().sort(function(e,t){return((e=e[a])===(t=t[a])?0:e>t?1:-1)*s})).forEach(function(t){-1!==t.name.toLowerCase().indexOf(i)&&l.push(r.a.createElement(b,{key:t.site,tableData:t,graphType:e.props.graphType}))}),r.a.createElement("div",{className:"gridtable"},r.a.createElement("svg",{className:"is-hidden"},r.a.createElement("symbol",{viewBox:"0 0 27 30",version:"1.1"},r.a.createElement("g",{id:"arrow-flow"},r.a.createElement("polygon",{points:"21.6 29.4545455 5.4 29.4545455 5.4 16.2 0 16.2 13.5 0 27 16.2 21.6 16.2"})))),r.a.createElement("div",{className:o},"Loading river information..."),r.a.createElement("table",{className:c},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"th-name"},r.a.createElement("button",{"data-sort":"name",className:u,onClick:this.handleSort},"Name")),r.a.createElement("th",{className:"th-cfs"},r.a.createElement("button",{"data-sort":"cfs",className:m,onClick:this.handleSort},"Cfs")),r.a.createElement("th",{className:"th-class"},"Class"),r.a.createElement("th",{className:"th-time"},"Time"))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",null,"River Name"),r.a.createElement("th",null,r.a.createElement("abbr",{title:"cubic feet per second"},"CFS")),r.a.createElement("th",{className:"th-class"},"Class"),r.a.createElement("th",{className:"th-time"},"Time"))),l))}}]),t}(s.Component)),w=a(19),y=a(8),N=(a(53),w.data),x=[],S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleRefreshTable=function(e){e.preventDefault(),a.getUsgsData()},a.handleFilterTable=function(e){a.setState({searchQuery:e.target.value})},a.clearSearch=function(e){a.setState({searchQuery:""})},a.state={error:!1,graphType:"00060",loading:!0,searchQuery:"",tableData:[]},a.sites=a.formatSites(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!!t.tableData.length}},{key:"componentDidMount",value:function(){this.getUsgsData()}},{key:"hideNotification",value:function(e){e.preventDefault(),e.currentTarget.parentElement.classList.add("is-hidden")}},{key:"render",value:function(){var e=p()("button is-primary",{"is-loading":this.state.loading}),t=p()("notification is-danger",{"is-hidden":!1===this.state.error});return r.a.createElement("div",{className:"rivertable"},r.a.createElement("section",{className:"section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"Riverflow"},r.a.createElement("div",{className:t},r.a.createElement("button",{className:"delete",onClick:this.hideNotification,"aria-label":"close error message"}," "),this.state.error),r.a.createElement("div",{className:"notification content"},r.a.createElement("button",{"aria-label":"Close the notification",className:"delete is-small",onClick:this.hideNotification}," "),r.a.createElement("p",null,"Riverflow provides the latest"," ",r.a.createElement("abbr",{title:"cubic feet per second"},"CFS")," from the USGS gauges of floatable rivers and creeks. The color indicates optimal floating conditions with additional inforamtion and a 7 day graph in the details.")),r.a.createElement("div",{className:"columns is-flex tools"},r.a.createElement("div",{className:"column column-search"},r.a.createElement("div",{className:"field level-item"},r.a.createElement("label",{htmlFor:"search",className:"label"},"Search"),r.a.createElement("p",{className:"control"},r.a.createElement("input",{autoComplete:"off",onChange:this.handleFilterTable,value:this.state.searchQuery,id:"search",name:"search",className:"input",type:"text",placeholder:"Filter the table"}),r.a.createElement("button",{className:"delete is-small",onClick:this.clearSearch,"aria-label":"clear the search"}," ")))),r.a.createElement("div",{className:"column column-button"},r.a.createElement("button",{className:e,onClick:this.handleRefreshTable,"aria-label":"Refresh the table data"},r.a.createElement("span",{className:"refresh-long is-hidden-mobile"},"refresh river table"),r.a.createElement("span",{className:"refresh-short is-hidden-tablet"},"\u21ba"))))),r.a.createElement(E,{loading:this.state.loading,tableData:this.state.tableData,graphType:this.state.graphType,searchQuery:this.state.searchQuery}))))}},{key:"formatSites",value:function(){var e=[];return N.forEach(function(t){t.value.match(/\d+/g)&&e.push(t.value)}),e.join()}},{key:"getUsgsData",value:function(){var e=this;x=[],this.setState({loading:!0}),v.a.get("https://waterservices.usgs.gov/nwis/iv/",{params:{parameterCd:this.state.graphType,sites:this.sites,format:"json",period:"PT12H",siteStatus:"active"}}).then(function(t){e.setState({loading:!1}),t.data.value.timeSeries?(e.displayUsgsData(t.data.value.timeSeries),e.setState({error:!1})):e.setState({error:"no river data available"})}).catch(function(t){console.log(t),e.setState({loading:!1}),e.setState({error:t.message})})}},{key:"displayUsgsData",value:function(e){var t,a,s,r,l,n,i,o,c,u,m,d=this,h=new Date,v={};e.forEach(function(e,f,p){(t=e.values[0].value)[0]&&(l=parseInt(t[0].value,10),a=t[t.length-1],n=parseInt(a.value,10),s=new Date(a.dateTime),m=s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1}),i=Math.round(n/l*100),h.toDateString()===s.toDateString()&&(s=""),r=e.sourceInfo.geoLocation.geogLocation,u=e.sourceInfo.siteCode[0].value,o=n>l,c=i>130,v={name:e.sourceInfo.siteName,location:"//maps.google.com/?q="+r.latitude+",+"+r.longitude,site:u,date:s,time:m,cfs:n,oldCfs:l,condition:d.getConditions(n).condition,level:d.getConditions(n).level,rising:o,risingFast:c},d.mergeRiverInfo(v))}),d.setState({tableData:x})}},{key:"mergeRiverInfo",value:function(e){N.forEach(function(t){t.value===e.site&&(e.class=t.class)}),x.push(e)}},{key:"getConditions",value:function(e){var t,a;return 0===(e=parseInt(e,10))?(t=y.flow0,a="level-0"):e>0&&e<50?(t=y.flow1,a="level-1"):e>=50&&e<100?(t=y.flow2,a="level-2"):e>=100&&e<300?(t=y.flow3,a="level-3"):e>=300&&e<600?(t=y.flow4,a="level-4"):e>=600&&e<2e3?(t=y.flow5,a="level-5"):e>=2e3&&(t=y.flow6,a="level-6"),{condition:t,level:a}}}]),t}(s.Component),k=(a(55),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("p",null,r.a.createElement("strong",null,"Riverflow")," by"," ",r.a.createElement("a",{href:"//www.mountaindrawn.com"},"Mountaindrawn"),". The source code is licensed",r.a.createElement("a",{href:"http://opensource.org/licenses/mit-license.php"}," MIT"),"."),r.a.createElement("p",null,"Built with React"),r.a.createElement("p",null,r.a.createElement("a",{className:"icon",href:"https://github.com/PaddyMurphy/react-riverflow"},r.a.createElement("b",{className:"show-accessible"},"view on github"),r.a.createElement("svg",{"aria-hidden":"true",className:"octicon octicon-mark-github",height:"24",version:"1.1",viewBox:"0 0 16 16",width:"24"},r.a.createElement("path",{fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"})))))))}}]),t}(s.Component)),R=(a(57),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d,null),r.a.createElement(S,null),r.a.createElement(k,null))}}]),t}(s.Component));a(59);n.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",function(){var e="".concat("/react-riverflow","/service-worker.js");navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})})},8:function(e){e.exports={flow0:"Sorry but this river is bone dry. Try a spring fed river like the San Marcos til we get more rain.",flow1:"The river is pretty much just a trickle right. Not much good for floating at the moment but a good rain should bring it up",flow2:"It's barely moving but it should be floatable in kayaks or tubes. Be prepared to drag bottom in spots though.",flow3:"This is a pretty leisurely flow but still fun. You shouldn't have any problems scraping bottom in canoes at this level",flow4:"Now we're talking! The river is flowing pretty good but not too dangerous. If the graph shows a sharp increase over the past week it may still be rising.",flow5:"The flow is moving now! Unless this is a large volume river like the Colorado or Rio Grande you can expect some really fast moving water.",flow6:"DANGER! This is flowing at a high volume! Unless you are an experienced paddler please check with a local outfitter for more information before heading out. If this is a large river like the Colorado it may be good this high."}}},[[20,2,1]]]);
//# sourceMappingURL=main.eb8ca4c3.chunk.js.map